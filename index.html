<html>
  <div>
    <div id="phase" style="background-color:#aaa; margin:auto; width:80%;">
      <h1 id="headline">Kalos Timers p2-1</h1>
      <p>
        HP:
        <button class="button2" onclick="changePhase(3)">
          <p>0% - 50%</p>
        </button>
        <button class="button2" onclick="changePhase(2)">
          <p>75%</p>
        </button>
        <button class="button2" onclick="changePhase(1)">
          <p>100%</p>
        </button>
      </p>
    </div>
  </div>
  <div class="item2" id="bombBox" style="background-color:#ccc;">
    <h2 id="bombTimer">--</h2>
    <button class="button1" onclick="bombTimer()">
      <p>Bombs</p>
    </button>
    <button class="button2" onclick="bombReset()">
      <p>Cancel</p>
    </button>
  </div>



  <div class="grid-container1">
    <div class="item1" id="breathBox" style="background-color:#ccc;">
      <h2 id="breathTimer">--</h2>
      <button class="button1" onclick="breathTimer()"> 
        <p>Breath</p>
      </button>
    </div>
    <div class="item1" id="diveBox" style="background-color:#ccc;">
      <h2 id="diveTimer">--</h2>
      <button class="button1" onclick="diveTimer()">
        <p>Dive</p>
      </button>
    </div>
    <div class="item1" id="fmaBox" style="background-color:#ccc;">
      <h2 id="fmaTimer">--</h2>
      <button class="button1" onclick="fmaTimer(150)">
        <p>FMA</p>
      </button>
      <button class="button2" onclick="fmaAdd10()">
        <p id="fmaAdd10">+10s</p>
      </button>
      <button class="button2" onclick="fmaAdd15()">
        <p id="fmaAdd15">+15s</p>
      </button>
      <button class="button2" onclick="fmaAdd50()">
        <p id="fmaAdd50">+Test</p>
      </button>
      <button class="button2" onclick="fmaSub50()">
        <p id="fmaSub50">-Test</p>
      </button>
    </div>
    <div class="item1" id="systemFailBox" style="background-color:#ccc;">
      <h2 id="systemFailTimer">--</h2>
      <button class="button1" onclick="systemFailTimer()">
        <p>Full Systems</p>
      </button>
      <button class="button2" onclick="systemFailReset()">
        <p>Cancel</p>
      </button>
    </div>
  </div>
</html>

<style>
  h1 {text-align: center; font-size: 40;}
  h2 {text-align: center; font-size: 40;}
  h3 {text-align: center; font-size: 25;}
  div {text-align: center; padding: 10px;}
  p {text-align: center;}
  .item1 {border: 3px solid transparent; display: block; align-items: center; justify-content: center; height: 152px;}
  .item2 {border: 3px solid transparent; margin: auto; width:20%; display: block; align-items: center; justify-content: center; height: 152px;}
  .grid-container1 {margin: auto; width:80%; display: grid; grid-gap: 10px; grid-template-columns: 1fr 1fr;}
  .button1 {
    background-color: #555555;
    border: none;
    color: white;
    padding: 1px 16px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 12px;
    border-radius: 3px;
  }
  .button2 {
    background-color: white;
    border: #555555;
    color: black;
    padding: 1px 16px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 11px;
    border-radius: 3px;
  }
</style>

<script>
  var phase = 1;
  function changePhase(num) {
    phase = num;
    document.getElementById('headline').innerHTML="Kalos Timers p2-"+phase;
  }

  var bombCountdown;
  var systemFailCountdown;
  var breathCountdown;
  var diveCountdown;
  var fmaCountdown;

  var bombSec;
  var systemFailSec;
  var breathSec;
  var diveSec;
  var fmaSec = 150;

  var warningBomb = 3;
  var warningBreath = 5;
  var warningDive = 5;
  var warningFMA = 20;
  var warningSystemFail = 20;











  function bombTimer(){
    bombSec = 10;
    document.getElementById('bombTimer').innerHTML = bombSec;
    document.getElementById("bombTimer").style.color = 'black';
    document.getElementById("bombBox").style.border = '3px solid transparent';
    clearInterval(bombCountdown);
    bombCountdown = setInterval(function(){
      bombSec--;
      document.getElementById('bombTimer').innerHTML = bombSec;
      if (bombSec <= warningBomb) {
        document.getElementById("bombTimer").style.color = 'red';
        document.getElementById("bombBox").style.border = '3px solid red';
      }
      if (bombSec > warningBomb) {
        document.getElementById("bombTimer").style.color = 'black';
        document.getElementById("bombBox").style.border = '3px solid transparent';
      }
      if (bombSec <= 0) {
        bombSec = 10;
      }
    }, 1000);
  }
  function bombReset(){
    bombSec = 10;
    document.getElementById('bombTimer').innerHTML = "--";
    document.getElementById("bombTimer").style.color = 'black';
    document.getElementById("bombBox").style.border = '3px solid transparent';
    clearInterval(bombCountdown);
  }











  function breathTimer(){
    if (phase == 1) {
      breathSec = 60;
    }
    if (phase == 2) {
      breathSec = 45;
    }
    if (phase == 3) {
      breathSec = 30;
    }
    document.getElementById('breathTimer').innerHTML = breathSec;
    document.getElementById("breathTimer").style.color = 'black';
    document.getElementById("breathBox").style.border = '3px solid transparent';
    clearInterval(breathCountdown);
    breathCountdown = setInterval(function(){
      breathSec--;
      document.getElementById('breathTimer').innerHTML = breathSec;
      if (breathSec <= warningBreath) {
        document.getElementById("breathTimer").style.color = 'red';
        document.getElementById("breathBox").style.border = '3px solid red';
      }
      if (breathSec <= 0) {
        clearInterval(breathCountdown);
      }
    }, 1000);
  }


  





function checkWarningDive() {
  if (diveSec <= warningDive) {
    document.getElementById("diveTimer").style.color = 'red';
    document.getElementById("diveBox").style.border = '3px solid red';
  }
  else {
    document.getElementById("diveTimer").style.color = 'black';
    document.getElementById("diveBox").style.border = '3px solid transparent';
  }
}
  function diveTimer(){
    diveSec = 20;
    document.getElementById('diveTimer').innerHTML = diveSec;
    checkWarningDive();
    clearInterval(diveCountdown);
    diveCountdown = setInterval(function(){
      diveSec--;
      document.getElementById('diveTimer').innerHTML = diveSec;
      checkWarningDive();
      if (diveSec <= 0) {
        clearInterval(diveCountdown);
      }
    }, 1000);
  }










  
  function checkWarningFMA() {
    if (fmaSec <= warningFMA) {
      document.getElementById("fmaTimer").style.color = 'red';
      document.getElementById("fmaBox").style.border = '3px solid red';
      document.getElementById("fmaBox").style.background = '#F9C3C3';
    }
    else {
      document.getElementById("fmaTimer").style.color = 'black';
      document.getElementById("fmaBox").style.border = '3px solid transparent';
      document.getElementById("fmaBox").style.background = '#ccc';
    }
  }
  function fmaTimer(sec){
    fmaSec = sec;
    document.getElementById('fmaTimer').innerHTML = fmaSec;
    checkWarningFMA();
    clearInterval(fmaCountdown);
    fmaCountdown = setInterval(function(){
      fmaSec--;
      document.getElementById('fmaTimer').innerHTML = fmaSec;
      checkWarningFMA();
      if (fmaSec <= 0) {
        clearInterval(fmaCountdown);
      }
    }, 1000);
  }
  function fmaAdd10(){
    clearInterval(fmaCountdown);
    fmaSec += 10;
    fmaTimer(fmaSec);
    checkWarningFMA();
  }
  function fmaAdd15(){
    clearInterval(fmaCountdown);
    fmaSec += 15;
    fmaTimer(fmaSec);
    checkWarningFMA();
  }
  function fmaAdd50(){
    clearInterval(fmaCountdown);
    fmaSec += 50;
    fmaTimer(fmaSec);
    checkWarningFMA();
  }
  function fmaSub50(){
    clearInterval(fmaCountdown);
    if (fmaSec<=50) {
      fmaSec = 0;
      document.getElementById('fmaTimer').innerHTML = fmaSec;
      checkWarningFMA();
    } else {
      fmaSec -= 50;
      fmaTimer(fmaSec);
    }
      checkWarningFMA();
  }






  function systemFailTimer(){
    systemFailSec = 60;
    var warning = 20;
    document.getElementById('systemFailTimer').innerHTML = systemFailSec;
    document.getElementById("systemFailTimer").style.color = 'black';
    document.getElementById("systemFailBox").style.border = '3px solid transparent';
    document.getElementById("systemFailBox").style.background = '#ccc';
    clearInterval(systemFailCountdown);
    systemFailCountdown = setInterval(function(){
      systemFailSec--;
      document.getElementById('systemFailTimer').innerHTML = systemFailSec;
      if (systemFailSec <= warning) {
        document.getElementById("systemFailTimer").style.color = 'red';
        document.getElementById("systemFailBox").style.border = '3px solid red';
        document.getElementById("systemFailBox").style.background = '#F9C3C3';
      }
      if (systemFailSec > warning) {
        document.getElementById("systemFailTimer").style.color = 'black';
        document.getElementById("systemFailBox").style.border = '3px solid transparent';
        document.getElementById("systemFailBox").style.background = '#ccc';
      }
      if (systemFailSec <= 0) {
        clearInterval(systemFailCountdown);
      }
    }, 1000);
  }
  function systemFailReset(){
    systemFailSec = 60;
    document.getElementById('systemFailTimer').innerHTML = "--";
    document.getElementById("systemFailTimer").style.color = 'black';
    document.getElementById("systemFailBox").style.border = '3px solid transparent';
    document.getElementById("systemFailBox").style.background = '#ccc';
    clearInterval(systemFailCountdown);
  }

  </script>
